{"ast":null,"code":"var _jsxFileName = \"/Users/qwerasdf_ho/Desktop/ideaHub/frontend/src/containers/administer/AdminContainer.js\";\nimport React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Admin from '../../components/administer/Admin';\nimport { listUsers } from '../../modules/users';\nimport { updateUsers } from '../../modules/users';\n\nconst AdminContainer = ({\n  location\n}) => {\n  const dispatch = useDispatch(); //users: 유저 정보 리스트, user: 현재 로그인 한 유저 정보\n\n  const _useSelector = useSelector(({\n    users,\n    loading,\n    user\n  }) => ({\n    users: users.users,\n    error: users.error,\n    loading: loading['users/LIST_USERS'],\n    user: user.user\n  })),\n        users = _useSelector.users,\n        error = _useSelector.error,\n        loading = _useSelector.loading,\n        user = _useSelector.user;\n\n  useEffect(() => {\n    dispatch(listUsers());\n  }, [dispatch, location.search]); //유저 정보를 받아서, 그 유저의 role을 변경하도록 함.\n  //dispatch 되기 전에 새로고침 되어버리는 현상이 발생해서, async-await 구문 삽입으로 해결.\n\n  const toAdmin = async userItem => {\n    await dispatch(updateUsers({\n      _id: userItem._id,\n      role: 'admin'\n    }));\n    window.location.reload();\n  };\n\n  const toWriter = async userItem => {\n    await dispatch(updateUsers({\n      _id: userItem._id,\n      role: 'writer'\n    }));\n    window.location.reload();\n  };\n\n  const toVisiter = async userItem => {\n    await dispatch(updateUsers({\n      _id: userItem._id,\n      role: 'visiter'\n    }));\n    window.location.reload();\n  };\n\n  return React.createElement(Admin, {\n    loading: loading,\n    error: error,\n    users: users,\n    user: user,\n    toAdmin: toAdmin,\n    toWriter: toWriter,\n    toVisiter: toVisiter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  });\n};\n\nexport default withRouter(AdminContainer);","map":{"version":3,"sources":["/Users/qwerasdf_ho/Desktop/ideaHub/frontend/src/containers/administer/AdminContainer.js"],"names":["React","useEffect","withRouter","useDispatch","useSelector","Admin","listUsers","updateUsers","AdminContainer","location","dispatch","users","loading","user","error","search","toAdmin","userItem","_id","role","window","reload","toWriter","toVisiter"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,KAAP,MAAkB,mCAAlB;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAASC,WAAT,QAA4B,qBAA5B;;AAEA,MAAMC,cAAc,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AACvC,QAAMC,QAAQ,GAAGP,WAAW,EAA5B,CADuC,CAEvC;;AAFuC,uBAGCC,WAAW,CACjD,CAAC;AAAEO,IAAAA,KAAF;AAASC,IAAAA,OAAT;AAAkBC,IAAAA;AAAlB,GAAD,MAA+B;AAC7BF,IAAAA,KAAK,EAAEA,KAAK,CAACA,KADgB;AAE7BG,IAAAA,KAAK,EAAEH,KAAK,CAACG,KAFgB;AAG7BF,IAAAA,OAAO,EAAEA,OAAO,CAAC,kBAAD,CAHa;AAI7BC,IAAAA,IAAI,EAAEA,IAAI,CAACA;AAJkB,GAA/B,CADiD,CAHZ;AAAA,QAG/BF,KAH+B,gBAG/BA,KAH+B;AAAA,QAGxBG,KAHwB,gBAGxBA,KAHwB;AAAA,QAGjBF,OAHiB,gBAGjBA,OAHiB;AAAA,QAGRC,IAHQ,gBAGRA,IAHQ;;AAYvCZ,EAAAA,SAAS,CAAC,MAAM;AACdS,IAAAA,QAAQ,CAACJ,SAAS,EAAV,CAAR;AACD,GAFQ,EAEN,CAACI,QAAD,EAAWD,QAAQ,CAACM,MAApB,CAFM,CAAT,CAZuC,CAgBvC;AACA;;AACA,QAAMC,OAAO,GAAG,MAAMC,QAAN,IAAkB;AAChC,UAAMP,QAAQ,CAACH,WAAW,CAAC;AAAEW,MAAAA,GAAG,EAAED,QAAQ,CAACC,GAAhB;AAAqBC,MAAAA,IAAI,EAAE;AAA3B,KAAD,CAAZ,CAAd;AACAC,IAAAA,MAAM,CAACX,QAAP,CAAgBY,MAAhB;AACD,GAHD;;AAIA,QAAMC,QAAQ,GAAG,MAAML,QAAN,IAAkB;AACjC,UAAMP,QAAQ,CAACH,WAAW,CAAC;AAAEW,MAAAA,GAAG,EAAED,QAAQ,CAACC,GAAhB;AAAqBC,MAAAA,IAAI,EAAE;AAA3B,KAAD,CAAZ,CAAd;AACAC,IAAAA,MAAM,CAACX,QAAP,CAAgBY,MAAhB;AACD,GAHD;;AAIA,QAAME,SAAS,GAAG,MAAMN,QAAN,IAAkB;AAClC,UAAMP,QAAQ,CAACH,WAAW,CAAC;AAAEW,MAAAA,GAAG,EAAED,QAAQ,CAACC,GAAhB;AAAqBC,MAAAA,IAAI,EAAE;AAA3B,KAAD,CAAZ,CAAd;AACAC,IAAAA,MAAM,CAACX,QAAP,CAAgBY,MAAhB;AACD,GAHD;;AAKA,SACE,oBAAC,KAAD;AACE,IAAA,OAAO,EAAET,OADX;AAEE,IAAA,KAAK,EAAEE,KAFT;AAGE,IAAA,KAAK,EAAEH,KAHT;AAIE,IAAA,IAAI,EAAEE,IAJR;AAKE,IAAA,OAAO,EAAEG,OALX;AAME,IAAA,QAAQ,EAAEM,QANZ;AAOE,IAAA,SAAS,EAAEC,SAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAWD,CA1CD;;AA4CA,eAAerB,UAAU,CAACM,cAAD,CAAzB","sourcesContent":["import React, { useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Admin from '../../components/administer/Admin';\nimport { listUsers } from '../../modules/users';\nimport { updateUsers } from '../../modules/users';\n\nconst AdminContainer = ({ location }) => {\n  const dispatch = useDispatch();\n  //users: 유저 정보 리스트, user: 현재 로그인 한 유저 정보\n  const { users, error, loading, user } = useSelector(\n    ({ users, loading, user }) => ({\n      users: users.users,\n      error: users.error,\n      loading: loading['users/LIST_USERS'],\n      user: user.user,\n    }),\n  );\n\n  useEffect(() => {\n    dispatch(listUsers());\n  }, [dispatch, location.search]);\n\n  //유저 정보를 받아서, 그 유저의 role을 변경하도록 함.\n  //dispatch 되기 전에 새로고침 되어버리는 현상이 발생해서, async-await 구문 삽입으로 해결.\n  const toAdmin = async userItem => {\n    await dispatch(updateUsers({ _id: userItem._id, role: 'admin' }));\n    window.location.reload();\n  };\n  const toWriter = async userItem => {\n    await dispatch(updateUsers({ _id: userItem._id, role: 'writer' }));\n    window.location.reload();\n  };\n  const toVisiter = async userItem => {\n    await dispatch(updateUsers({ _id: userItem._id, role: 'visiter' }));\n    window.location.reload();\n  };\n\n  return (\n    <Admin\n      loading={loading}\n      error={error}\n      users={users}\n      user={user}\n      toAdmin={toAdmin}\n      toWriter={toWriter}\n      toVisiter={toVisiter}\n    />\n  );\n};\n\nexport default withRouter(AdminContainer);\n"]},"metadata":{},"sourceType":"module"}