let contentsCtrl,checkLoggedIn,checkCRUDPermission;_f8e‍.x([["default",()=>_f8e‍.o]]);_f8e‍.w("./contents.ctrl",[["*",null,function(v){contentsCtrl=v}]]);_f8e‍.w("../../lib/checkLoggedIn",[["default",["checkLoggedIn"],function(v){checkLoggedIn=v}]]);_f8e‍.w("../../lib/checkCRUDPermission",[["default",["checkCRUDPermission"],function(v){checkCRUDPermission=v}]]);/*
  contents directory는 각 작품을 관리
*/

const Router = require('koa-router');




const contents = new Router();

//contents 라우트에 여러 라우트 설정, 각각의 함수 호출하도록 함.
contents.get('/', contentsCtrl.list);
contents.post('/', checkLoggedIn, checkCRUDPermission, contentsCtrl.write);

//id는 ctx.params에서 확인 가능
const content = new Router(); // /api/posts/:id
content.get('/', contentsCtrl.read);
content.delete(
  '/',
  checkLoggedIn,
  checkCRUDPermission,
  contentsCtrl.checkOwnContent,
  contentsCtrl.remove,
);
content.patch(
  '/',
  checkLoggedIn,
  checkCRUDPermission,
  contentsCtrl.checkOwnContent,
  contentsCtrl.update,
);
//star 기능은 로그인 여부만 확인하면 됨
content.patch('/star', checkLoggedIn, contentsCtrl.update);

contents.use('/:id', contentsCtrl.getContentById, content.routes());

_f8e‍.d(contents);
